
<div class="panel w1" id="crmWidget">
    <div class="panelHead">
        <div class="panelTitle">CRM</div>
    </div>

    <div class="panelContent" id="reportingPanel" style="">

        <div class="actionTile restricted-DistributorsApp">
            <i class="fas fa-handshake actionTileIcon"></i>
            <a href="/UI/DistributorsApp/DistributorsAppPage.html">Velkoodběratelé</a>
        </div>

        <div class="actionTile restricted-DistributorsApp" id="meetingsTile">
            <i class="far fa-calendar-alt actionTileIcon"></i>
            <a id="meetingsLink" href="/UI/DistributorsApp/MeetingsCalendar.html">...</a>
        </div>

        <div class="actionTile">
            <i class="fas fa-project-diagram actionTileIcon"></i>
            <a href="/UI/DistributorsApp/CustomerTagsDesignerPage.html">Editor štítků</a>
        </div>

        <div class="actionTile" id="customersImportTile" event-bind="click:importCustomers()" style="cursor:pointer">
            <i class="fas fa-arrow-down actionTileIcon"></i>
            <a>Importovat zákazníky z Floxu</a>
        </div>

        <div class="actionTile">
            <i class="fas fa-table actionTileIcon"></i>
            <a href="/UI/CrmReporting/CrmReporting.html">Velkoobchod - Reporty</a>
        </div>

    </div>
    <script>
</script>
</div>
<link href="/UI/Inspector/Inspector.css" rel="stylesheet" />
<script>
    lt.element("meetingsTile").attach(function (meetingsLink) {

        const loadOverview = () => lt.api("/crmMeetings/getMyMeetingsOverview").get((t) => meetingsLink.innerHTML = ("Schůzky: " + t.Text).trim());

        setTimeout(loadOverview, 100);

    });

    lt.element("customersImportTile").attach(function () {
        this.importCustomers = () => {
            lt.api("/customers/importCustomers").get(() => {
                alert("Hotovo");
            });
        };
    });
</script>
